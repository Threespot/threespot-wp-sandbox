!function(c){"undefined"!=typeof acf&&"undefined"!=typeof acfe&&new acf.Model({wait:"prepare",events:{"click .acfe-dev-edit-meta":"onEdit"},onEdit:function(t,e){t.preventDefault();var s=e.closest("tr"),i=e.attr("data-meta-id"),n=e.attr("data-meta-key"),r=e.attr("data-meta-type"),o=e.attr("data-nonce");c.ajax({url:acf.get("ajaxurl"),type:"post",data:{action:"acfe/dev/edit_meta",id:i,key:n,type:r,_wpnonce:o},success:function(t){"0"!==t&&"-1"!==t&&acfe.newModal({title:"Edit Meta",size:"medium",destroy:!0,events:{"click .acfe-modal-footer a.update":"onUpdate"},content:t,footer:function(){return'<button class="button close">'+acf.__("Cancel")+'</button> <a class="button button-primary update">'+acf.__("Update")+"</a>"},onUpdate:function(t,e){var a;t.preventDefault(),this.$("form")[0].reportValidity()&&(a=acf.serialize(this.$content()),this.close(),c.ajax({url:acf.get("ajaxurl"),type:"post",data:{action:"acfe/dev/update_meta",id:i,key:n,type:r,data:a,_wpnonce:o},success:function(t){"0"!==t&&(s.addClass("updated").delay(350).queue(function(){c(this).removeClass("updated").dequeue()}),s.find("td.col-name strong").text(a.name),s.find("td.col-value").html(t))}}))}})}})}})}(jQuery),function(a){var t;"undefined"!=typeof acf&&"undefined"!=typeof acfe&&(new acf.Model({wait:"prepare",priority:1,initialize:function(){acfe.get("module")&&new t(acfe.get("module"))}}),t=acf.Model.extend({events:{'click a[data-event="review-sync"]':"onClickReview"},actions:{validation_success:"onValidationSuccess"},setup:function(t){this.inherit(t)},onValidationSuccess:function(t,e){"post"===this.get("screen")&&a('[data-event="review-sync"]').length&&(confirm("Local json file is different from the version in database.\nDo you want to replace the local file with the current settings?")||this.preventSubmit(t,e))},preventSubmit:function(t,e){function a(t){t.preventDefault()}t.on("submit",a),this.setTimeout(function(){t.off("submit",a),e.reset()},50)},onClickReview:function(t,e){t.preventDefault(),this.reviewSync(e.data())},reviewSync:function(t){var e=acf.__("Review local changes"),s=acf.newModal({title:e,content:'<p class="acf-modal-feedback"><i class="acf-loading"></i> '+acf.__("Loading diff")+"</p>"});a.ajax({url:acf.get("ajaxurl"),method:"POST",dataType:"json",data:acf.prepareForAjax({action:"acfe/ajax/module_local_diff",module:t.module,id:t.id,_nonce:t.nonce})}).done(function(t,e,a){s.content(t.content),s.toolbar(t.toolbar)}).fail(function(t,e,a){(error=acf.getXhrError(t))&&s.content('<p class="acf-modal-feedback error">'+error+"</p>")})}}))}(jQuery),function(d){var t;"undefined"!=typeof acf&&"undefined"!=typeof acfe&&(new acf.Model({wait:"prepare",priority:1,initialize:function(){"acfe_rewrite_rules"===acf.get("screen")&&new t}}),t=acf.Model.extend({data:{firstMatch:null,rewriteRules:{}},events:{"mouseover span.regex-repeater":"hoverRepeater","mouseout span.regex-repeater":"hoverRepeater","mouseover span.regexgroup,span.regexgroup-target":"hoverRegex","mouseout span.regexgroup,span.regexgroup-target":"hoverRegex","keyup #acfe-rewrite-rules-url":"onSearch","click #acfe-rewrite-rules-clear":"onClear"},hoverRepeater:function(t,e){e.parent().toggleClass("highlight")},hoverRegex:function(t,e){e=e[0].id;"-target"===e.substr(-7)&&(e=e.substr(0,e.length-7)),d("#"+e+", #"+e+"-target").toggleClass("highlight")},onSearch:function(t,e){var a=e.val();if(""!==a){var s,i={},n=!0,r=this.get("rewriteRules");for(s in r){var o=r[s].exec(a);if(o){i[s]=o;for(var c=d("#rewrite-rule-"+s).addClass("rewrite-rule-matched").removeClass("rewrite-rule-unmatched"),l=0;l<o.length;l++)d("#regex-"+s+"-group-"+l+"-target-value").html(o[l]||"");n&&(c.addClass("rewrite-rule-matched-first"),n=!1,this.get("firstMatch")!==s&&(d("#rewrite-rule-"+this.get("firstMatch")).removeClass("rewrite-rule-matched-first"),this.set("firstMatch",s)))}else d("#rewrite-rule-"+s).removeClass("rewrite-rule-matched").addClass("rewrite-rule-unmatched")}}else d(".rewrite-rule-line").removeClass("rewrite-rule-matched rewrite-rule-matched-first rewrite-rule-unmatched")},onClear:function(t,e){t.preventDefault(),d("#acfe-rewrite-rules-url").val(""),d(".rewrite-rule-line").removeClass("rewrite-rule-matched rewrite-rule-matched-first rewrite-rule-unmatched")},setup:function(t){var e,a=acf.get("rewrite_rules");for(e in a){var s=a[e];s="^"!==(s=s.replace(/\\\\/g,"\\")).substring(0,1)?"^"+s:s,a[e]=new RegExp("^"+s)}this.set("rewriteRules",a)},initialize:function(){acf.unload.disable()}}))}(jQuery),function(e){var t;"undefined"!=typeof acf&&"undefined"!=typeof acfe&&(new acf.Model({wait:"prepare",priority:1,initialize:function(){e("body").hasClass("acfe-screen-layouts")&&acfe.inArray(acfe.getCurrentFilename(),["post.php","post-new.php"])&&new t}}),t=acf.Model.extend({initialize:function(){var t=e(".columns-prefs input:checked").val();t&&"1"!==t&&"2"!==t&&e("#post-body.metabox-holder").removeClass("columns-2").addClass("columns-"+t)}}))}(jQuery),function(s){var t,e,a;"undefined"!=typeof acf&&"undefined"!=typeof acfe&&(new acf.Model({wait:"prepare",priority:1,initialize:function(){"acfe_scripts"===acf.get("screen")&&new t}}),t=acf.Model.extend({i:-1,xhr:!1,timer:!1,stats:!1,paused:!1,confirmed:!1,restart:!1,data:{script:!1,run:!1},scriptData:{},scriptStats:{},$events:function(){return s("#events .events")},$eventType:function(t){return this.$events().find('> .event[data-type="'+t+'"]')},$eventStatus:function(t){return this.$events().find('> .event[data-status="'+t+'"]')},events:{"click #start":"onStart","click #stop":"onStop","click #pause":"onPause","click #clear":"onClear","click #tail":"onTail","click .filter":"onFilter",'click [name="acf[confirm]"]':"onConfirm"},actions:{resize:"onResize",ready:"onResize"},onResize:function(){this.updateEventsHeight()},onScroll:function(t){this.isEventsScrolled()||s("#tail").removeClass("disabled")},onStart:function(t,e){t.preventDefault(),this.submitForm(this)},onStop:function(t){t.preventDefault(),this.stop()},onPause:function(t){t.preventDefault(),this.pause()},onClear:function(t){t.preventDefault(),this.clear(!0)},onTail:function(t,e){t.preventDefault(),e.hasClass("disabled")||this.snapEventsScroll()},onFilter:function(t,e){t.preventDefault();t=e.data("status"),t=this.$eventStatus(t);e.hasClass("disabled")?(e.removeClass("disabled"),t.show()):(e.addClass("disabled"),t.not('[data-type="confirm"]').hide()),s("#tail").hasClass("disabled")&&this.snapEventsScroll()},onConfirm:function(t,e){var a;t.preventDefault(),this.busy||((t=(a=s(t.currentTarget)).closest("form").find('input[name="'+a.attr("name")+'"]')).length||(t=s("<input>",{type:"hidden",name:a.attr("name")})).insertAfter(a),e=e.closest(".event"),t.val(a.val()),e.attr("data-type","confirmed"),this.confirmed=!1,s("#start").attr("disabled",!0),s("#stop").attr("disabled",!1),s("#clear").attr("disabled",!1),s("#pause").attr("disabled",!1),this.newAjax(),("1"===t.val()?s(".confirm-buttons").html("Confirmed"):s(".confirm-buttons").html("Canceled")).addClass("confirmed"),s('.filters > .filter[data-status="'+e.attr("data-status")+'"]').hasClass("disabled")&&e.hide(),this.timer.start())},submitForm:function(t){acf.validateForm({form:t.$(".wrap form"),reset:!0,success:function(){t.start()}})&&t.start()},addEvent:function(t){var e="",a=new Date,a=("0"+a.getHours()).substr(-2)+":"+("0"+a.getMinutes()).substr(-2)+":"+("0"+a.getSeconds()).substr(-2);t=acf.parseArgs(t,{i:this.i,time:a,type:"",message:"",status:"",link:!1,debug:""}),acfe.isEmpty(t.debug)||(e+='<a href="#" data-modal>'+acf.__("Debug")+'</a>\n<div class="acfe-modal" data-title="'+acf.__("Debug")+'" data-footer="'+acf.__("Close")+'" data-size="large">\n    <div class="acfe-modal-spacer"><pre>'+t.debug+"</pre></div>\n</div>"),t.link&&(e=e.length?t.link+" | "+e:t.link),"confirm"===t.effect&&(t.type="confirm",t.message+='<div class="confirm-buttons">   <button class="button button-primary" name="acf[confirm]" value="1">Confirm</button>   <button class="button" name="acf[confirm]" value="0">Cancel</button></div>');a=this.isEventsScrolled(),e=s('<div class="event" data-status="'+t.status+'" data-type="'+t.type+'" data-i="'+t.i+'" data-time="'+t.time+'">\n    <div class="time"><span>'+t.time+'</span></div>\n    <div class="message">'+t.message+'</div>\n    <div class="details">'+e+"</div>\n</div>").appendTo(this.$events());s('.filters > .filter[data-status="'+t.status+'"]').hasClass("disabled")&&"confirm"!==t.type&&e.hide();e=s("#clear");e.attr("disabled",!1),"clear"===t.type&&e.attr("disabled",!0),this.updateFilters(),a&&this.snapEventsScroll()},setup:function(t){this.$el=s(document),this.set("script",acf.get("script")),this.set("run",acf.get("script_run")),this.timer=new e,this.stats=new a},initialize:function(){acf.unload.disable(),this.updateEventsHeight(),this.get("run")&&this.submitForm(this),this.on(this.$events(),"scroll","onScroll"),acf.enableSubmit=function(t){return t.removeClass("disabled")},acf.disableSubmit=function(t){return t.addClass("disabled")}},start:function(){this.i=-1,this.scriptData={},this.scriptStats={},s("#start").attr("disabled",!0),s("#pause").attr("disabled",!1),s("#stop").attr("disabled",!1),s("#clear").attr("disabled",!1),this.newAjax({type:"start"}),this.stats.clear(),this.timer.start(!0)},stop:function(t=!1){this.xhr&&(this.xhr.abort(),this.xhr=!1),this.$eventType("loading").remove(),this.paused=!1,this.confirmed=!1,s(".confirm-buttons:not(.confirmed)").remove(),t||this.newAjax({type:"stop"}),s("#start").attr("disabled",!1),s("#pause").attr("disabled",!0).removeClass("paused"),s("#stop").attr("disabled",!0),s("#clear").attr("disabled",!1),this.timer.clear()},pause:function(){this.paused?this.busy||(this.paused=!1,s("#start").attr("disabled",!0),s("#stop").attr("disabled",!1),s("#clear").attr("disabled",!1),s("#pause").removeClass("paused"),this.newAjax(),this.timer.start()):(this.paused=!0,s("#pause").attr("disabled",!0))},doPause:function(){s("#start").attr("disabled",!0),s("#stop").attr("disabled",!1),s("#clear").attr("disabled",!1),s("#pause").attr("disabled",!1).addClass("paused"),this.timer.pause(),this.addEvent({i:"",type:"pause",status:"info",message:"Pause"})},doConfirm:function(){s("#start").attr("disabled",!0),s("#stop").attr("disabled",!1),s("#clear").attr("disabled",!1),s("#pause").attr("disabled",!0),this.timer.pause()},clear:function(t=!1){this.$eventType("confirm").length?this.$events().find(' > *:not(.event[data-type="confirm"])').remove():(this.$events().html(""),t&&this.addEvent({i:"",type:"clear",status:"info",message:"Clear"}))},newAjax:function(t){return this.paused?this.doPause():this.confirmed?this.doConfirm():(t=t||{},"request"===(t=acf.parseArgs(t,{action:"acfe/ajax/script",script:this.get("script"),index:-1,type:"request",data:this.scriptData,stats:this.scriptStats,fields:acf.serialize(this.$("form"),"acf")})).type&&(this.i++,t.index=this.i),t=acf.applyFilters("acfe/scripts/ajax_data",t,this),t=acf.applyFilters("acfe/scripts/ajax_data/name="+this.get("script"),t,this),void(this.xhr=s.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(t),type:"post",dataType:"json",context:this,beforeSend:this.onBeforeSend,success:this.onSuccess,complete:this.onComplete,statusCode:this.onStatusCode})))},onBeforeSend:function(){this.busy=!0,this.addEvent({i:"",message:'<span class="spinner"></span>',type:"loading"})},onSuccess:function(t){return t=acf.applyFilters("acfe/scripts/ajax_success",t,this),t=acf.applyFilters("acfe/scripts/ajax_success/name="+this.get("script"),t,this),this.stats.update(t,this.timer.sec),void 0!==t.data&&(this.scriptData=t.data),void 0!==t.stats&&(this.scriptStats=t.stats),"clear"===t.effect?this.clear():"pause"!==t.effect||this.paused?"confirm"!==t.effect||this.confirmed||(this.confirmed=!0):this.paused=!0,this.$eventType("loading").remove(),void 0!==t.message&&this.addEvent(t),this.restart?(this.restart=!1,this.start()):"request"===t.event?this.newAjax():"stop"===t.event?this.stop():"restart"===t.event?(this.restart=!0,this.stop()):void 0},onComplete:function(){this.busy=!1},onStatusCode:{400:function(){this.addEvent({type:"error",status:"error",message:"Error 400: Request not found"}),this.stop(!0)},404:function(){this.addEvent({type:"error",status:"error",message:"Error 404: <code>admin-ajax.php</code> not found"}),this.stop(!0)},500:function(){this.addEvent({type:"error",status:"error",message:"Error 500: PHP error. Check your logs"}),this.stop(!0)},524:function(){this.addEvent({type:"error",status:"error",message:"Error 524: Timeout. Please reload the script"}),this.stop(!0)}},updateFilters:function(){s('.filters > .filter[data-status="success"]').html(this.$eventStatus("success").length),s('.filters > .filter[data-status="info"]').html(this.$eventStatus("info").length),s('.filters > .filter[data-status="error"]').html(this.$eventStatus("error").length),s('.filters > .filter[data-status="warning"]').html(this.$eventStatus("warning").length)},isEventsScrolled:function(){var t=this.$events()[0];return t.scrollHeight-t.clientHeight<=t.scrollTop+1},snapEventsScroll:function(){s("#tail").addClass("disabled");var t=this.$events()[0];this.$events().scrollTop(t.scrollHeight-t.clientHeight)},updateEventsHeight:function(){var t=0;this.$('#postbox-container-2 .postbox:not("#events")').each(function(){t+=s(this).outerHeight()+20});var e=window.innerHeight-(t+270);this.$events().height(e)}}),e=acf.Model.extend({sec:0,var:!1,$time:function(){return s("#events .postbox-footer .timer > .time")},start:function(t=!1){var s=this;t&&s.$time().html("00:00:00");this.var=setInterval(function(){++s.sec;var t=Math.floor(s.sec/3600),e=Math.floor((s.sec-3600*t)/60),a=s.sec-(3600*t+60*e);t<10&&(t="0"+t),e<10&&(e="0"+e),a<10&&(a="0"+a),s.$time().html(t+":"+e+":"+a)},1e3)},pause:function(){clearInterval(this.var)},clear:function(){clearInterval(this.var),this.sec=0}}),a=acf.Model.extend({$total:function(){return s("#events .postbox-footer .total")},$left:function(){return s("#events .postbox-footer .left")},$timeLeft:function(){return s("#events .postbox-footer .timeleft")},update:function(t,e){var a;0<t.stats.total&&(this.$total().show(),this.$total().find("> span").html(t.stats.total)),(0<t.stats.left||0<t.stats.total&&0<=t.stats.left)&&(this.$left().show(),this.$left().find("> span").html(t.stats.left)),0<t.stats.total&&0<=t.stats.left&&t.stats.total!==t.stats.left&&(a=parseInt(t.stats.total),t=parseInt(t.stats.left),a=parseInt(a-t),e=0===(e=parseInt(e))?1:e,e=(e=0===(e=(e=parseInt(e/a*t))||0)&&0<t?t:e)-(3600*(a=Math.floor(e/3600))+60*(t=Math.floor((e-3600*a)/60))),a<10&&(a="0"+a),t<10&&(t="0"+t),e<10&&(e="0"+e),this.$timeLeft().show(),this.$timeLeft().find("> span").html(a+":"+t+":"+e))},clear:function(){this.$total().find("> span").html("-"),this.$left().find("> span").html("-"),this.$timeLeft().find("> span").html("-")}}))}(jQuery),function(){var t;"undefined"!=typeof acf&&"undefined"!=typeof acfe&&(new acf.Model({wait:"prepare",priority:1,initialize:function(){"acfe_settings"===acf.get("screen")&&new t}}),t=acf.Model.extend({actions:{new_field:"newField"},events:{'click [data-acfe-settings-action="edit"]':"onClickEdit",'click [data-acfe-settings-action="default"]':"onClickDefault"},onClickEdit:function(t,e){var a=e.data("acfe-settings-field"),a=acf.getField(a);a.showEnable(a.cid),acf.hide(e),acf.show(e.closest("div").find('[data-acfe-settings-action="default"]'));a=e.closest(".inside").find("> .acf-tab-wrap > .acf-tab-group > li.active span.acfe-tab-badge"),e=parseInt(a.text())+1;a.text(e),0<e&&acf.show(a)},onClickDefault:function(t,e){var a=e.data("acfe-settings-field"),a=acf.getField(a);a.hideDisable(a.cid),acf.hide(e),acf.show(e.closest("div").find('[data-acfe-settings-action="edit"]'));a=e.closest(".inside").find("> .acf-tab-wrap > .acf-tab-group > li.active span.acfe-tab-badge"),e=parseInt(a.text())-1;a.text(e),0==e&&acf.hide(a)},newField:function(t){t.$el.hasClass("acfe-disabled")&&t.hideDisable(t.cid)}}))}(jQuery);