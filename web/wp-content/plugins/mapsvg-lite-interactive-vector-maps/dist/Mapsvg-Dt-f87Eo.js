function e(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(n[o[s]]=e[o[s]])}return n}function t(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError,jQuery;class n{constructor(e,t){const n=this;n.element=e,n.callback=t;const o=getComputedStyle(e);let s=parseInt(o.zIndex);isNaN(s)&&(s=0),s--,n.expand=document.createElement("div"),n.expand.style.position="absolute",n.expand.style.left="0px",n.expand.style.top="0px",n.expand.style.right="0px",n.expand.style.bottom="0px",n.expand.style.overflow="hidden",n.expand.style.zIndex=s.toString(),n.expand.style.visibility="hidden";const r=document.createElement("div");r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="10000000px",r.style.height="10000000px",n.expand.appendChild(r),n.shrink=document.createElement("div"),n.shrink.style.position="absolute",n.shrink.style.left="0px",n.shrink.style.top="0px",n.shrink.style.right="0px",n.shrink.style.bottom="0px",n.shrink.style.overflow="hidden",n.shrink.style.zIndex=s.toString(),n.shrink.style.visibility="hidden";const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width="200%",i.style.height="200%",n.shrink.appendChild(i),n.element.appendChild(n.expand),n.element.appendChild(n.shrink);const a=e.getBoundingClientRect();n.currentWidth=a.width,n.currentHeight=a.height,n.setScroll(),n.expand.addEventListener("scroll",(function(){n.onScroll()})),n.shrink.addEventListener("scroll",(function(){n.onScroll()}))}onScroll(){const e=this,t=e.element.getBoundingClientRect(),n=t.width,o=t.height;n==e.currentWidth&&o==e.currentHeight||(e.currentWidth=n,e.currentHeight=o,e.callback()),this.setScroll()}setScroll(){this.expand.scrollLeft=1e7,this.expand.scrollTop=1e7,this.shrink.scrollLeft=1e7,this.shrink.scrollTop=1e7}destroy(){this.expand.remove(),this.shrink.remove()}}const o=()=>navigator.userAgent.toLowerCase(),s=()=>window.matchMedia("only screen and (max-width: 767px)").matches,r=()=>window.matchMedia("only screen and (min-width: 768px) and (max-width: 1024px)").matches,i=e=>("originalEvent"in e&&(e=e.originalEvent),"clientX"in e?{x:e.clientX+$(document).scrollLeft(),y:e.clientY+$(document).scrollTop()}:"pageX"in e?{x:e.pageX,y:e.pageY}:window.mapsvg.touchDevice?(e=e.originalEvent||e).touches&&e.touches[0]?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:void 0),a=e=>e.charAt(0).toUpperCase()+e.slice(1),l=e=>{switch(String(e).toLowerCase()){case"on":case"true":case"1":case"yes":case"y":return!0;case"off":case"false":case"0":case"no":case"n":return!1;default:return}},c=e=>!isNaN(parseFloat(e))&&isFinite(e),d=e=>(0!=e.indexOf("http://")&&0!=e.indexOf("https://")||(e="//"+e.split("://").pop()),e.replace(/^.*\/\/[^/]+/,"")),p=e=>e.endsWith("/")?e:e+"/",u=e=>e.startsWith("/")?e.slice(1):e,h=e=>{const t=[];if(null===e)return null;if(void 0===e)return'""';if("object"==typeof e&&null==e.join){let n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o='"'+n.replace(/"/g,'\\"')+'"';t.push(o+": "+h(e[n]))}return"{"+t.join(",")+"}"}if("object"==typeof e&&null!=e.join){let n;for(n in e)t.push(h(e[n]));return"["+t.join(",")+"]"}return"function"==typeof e?e.toString().replace("function anonymous","function"):JSON.stringify(e)},f=e=>{const t=new RegExp(/^([0-9a-f]{3}|[0-9a-f]{6})$/i);return"string"==typeof e&&null!==e.match(t)&&(e="#"+e),e},g=(e,t,n,o)=>{clearTimeout(e._tId),e._tId=setTimeout((function(){e.apply(n,o)}),t)},m=(e,t)=>{let n=null;return function(...o){const s=this;clearTimeout(n),n=setTimeout((()=>{e.apply(s,o)}),t)}};let y;const x=(e,t)=>{if(!window.google)return console.error("MapSVG: Google Maps API is not loaded."),jQuery.growl.error({title:"Error",message:"Google Maps API is not loaded"}),!1;y||(y=new google.maps.Geocoder),g(y.geocode,500,y,[e,function(e,n){if("OK"===n)t(e);else{if("ZERO_RESULTS"===n)return;jQuery.growl&&jQuery.growl.error({title:"Error: "+n,message:"There is some problem with Google API keys. See browser's console for more details"})}}])};function v(e){let t,n;const o=e.trim();if(-1==o.indexOf("{")||0!==o.indexOf("function")||-1==o.indexOf("("))return new SyntaxError("MapSVG user function error: no function body.");const s=o.substring(o.indexOf("{")+1,o.lastIndexOf("}")),r=o.substring(o.indexOf("(")+1,o.indexOf(")"));try{t=new Function(r,s)}catch(e){n=e}return n||t}const w=e=>{const t=[];return e.forEach((e=>{t.push(O(e))})),Promise.all(t)},b=e=>/\.js($|\?)/.test(e)?"JS":/\.css($|\?)/.test(e)?"CSS":"Unknown",O=e=>new Promise(((t,n)=>{const{path:o,children:s}=e,r="JS"===b(o),i="CSS"===b(o);if(r){const e=document.createElement("script");e.src=window.mapsvg.routes.root+o,-1===e.src.indexOf("?v")&&-1===e.src.indexOf("&v")&&(-1===e.src.indexOf("?")?e.src+="?v="+window.mapsvg.version:e.src+="&v="+window.mapsvg.version),e.type="text/javascript",e.defer=!1,e.async=!0,e.onload=function(){s&&s.length>0?t(w(s)):t(o)},e.onerror=function(){n(new Error("Failed to load script "+o))},document.head.appendChild(e)}else if(i){const e=document.createElement("link");e.href=window.mapsvg.routes.root+o,e.rel="stylesheet",document.head.appendChild(e),t(o)}}));function S(e,t){if(e&&!t)return 1;if(!e&&t)return-1;if(!e&&!t)return 0;const n=e.split(".").map(Number),o=t.split(".").map(Number),s=Math.max(n.length,o.length);for(let e=0;e<s;e++){const t=n[e]||0,s=o[e]||0;if(t>s)return 1;if(t<s)return-1}return 0}const E=function*(){let e=1;for(;;)yield e++}();function j(){return E.next().value}function M(e,t,n){return void 0===n?C(e,t):(C(e,t),C(e,n))}function C(e,t){if(void 0===t)return e;if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return t.map((e=>C({},e)));for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(void 0===t[n])continue;"object"==typeof t[n]&&null!==t[n]?("object"==typeof e[n]&&null!==e[n]||(e[n]={}),e[n]=C(e[n],t[n])):e[n]=t[n]}return e}const k=(e,t)=>t.split(".").reduce(((e,t)=>e&&e[t]),e),T=e=>{const t=e.split(".");return{object:t[0],field:t.slice(1).join(".")}},I=e=>{let t="";const n=e.replace("http://","").replace("https://","").split("/");return n.length>0&&(t=n[0]),t},L=e=>0===e.indexOf("http:")||0===e.indexOf("https:")||0===e.indexOf("//"),A=(e,t)=>I(e)===I(t),F={isPhone:s,isMac:()=>navigator.platform.toUpperCase().indexOf("MAC")>=0,getBrowser:()=>{const e=o();return{ie:e.indexOf("msie")>-1||e.indexOf("trident")>-1||e.indexOf("edge")>-1,firefox:e.indexOf("firefox")>-1,safari:e.indexOf("safari")>-1&&-1===e.indexOf("chrome")}},getDevice:()=>{const e=o();return{ios:e.indexOf("ipad")>-1||e.indexOf("iphone")>-1||e.indexOf("ipod")>-1,android:-1!==e.indexOf("android")}},getMouseCoords:i,getUserAgent:o},N={env:F,numbers:{isNumber:c,parseBoolean:l,compareVersions:S},strings:{safeURL:d,ucfirst:a,convertToText:h,fixColorHash:f,removeLeadingSlash:u,functionFromString:v,toSnakeCase:function(e){return"string"==typeof e?e.replace(/\s+/g,"_"):e}},funcs:{geocode:x,throttle:g,deepMerge:M,getNestedValue:k,splitObjectAndField:T},files:{getFileType:b,loadFiles:w,loadFile:O},http:{handleFailedRequest:e=>{let t="";if(403===e.status)-1!==e.responseText.indexOf("Wordfence")?t+='The request has been blocked by Wordfence. Switch Wordfence to "Learning mode", and save the map settings again. If the settings are saved successfully, you can switch Wordfence back to normal mode.':t+="The request has been blocked by your server. Do you have mod_sec Apache's module enabled? If that's the case you need to change its settings.";else if(e&&e.responseText)try{const n=JSON.parse(e.responseText);n&&n.data&&n.data.error&&(t=n.data.error)}catch(e){}$.growl.error({title:"Error: "+e.status+" "+e.statusText,message:t,duration:3e4})}}};"undefined"==typeof $&&($=jQuery);class _{constructor(){}}class P{constructor(){this.loaded=!1,this.version="8.5.34",this.templatesLoaded={},this.mouse={x:0,y:0},this.meta={},this.ResizeSensor=n,this.googleMapsApiLoaded=!1,this.instances=[];const{wp:e,mapsvg_paths:t,ajaxurl:o,mapsvg_runtime_vars:s,google:r}=window;void 0!==e&&void 0!==e.media&&(this.mediaUploader=e.media({title:"Choose images",button:{text:"Choose images"},multiple:!0})),this.mouse={x:0,y:0}}static createClient(e){const t=null!=e?e:window.mapsvgFrontendParams;if(!t)throw new Error("MapSVG: can't initialize the core due to the missing front-end options.");let n;return n||(n=new P,n.init(t),window.MapSVG=n),n}init(e){return t(this,void 0,void 0,(function*(){if(this.nonce=e.nonce,this.routes=e.routes,this.googleMaps={apiKey:e.google_maps_api_key,onLoadCallbacks:[],apiIsLoading:!1,loaded:!1},void 0!==window.ajaxurl&&(this.routes.ajaxurl=window.ajaxurl),this.setEventHandlers(),this.extendBuiltins(),!window.mapsvg||window.mapsvg instanceof HTMLElement){const e=()=>t(this,void 0,void 0,(function*(){(yield import("./InitGlobals-DCSOJFi4.js")).initGlobals()}));yield e()}this.loadMaps(),this.initialized=!0}))}receiveMessageFromIframe(e){const t=document.getElementsByTagName("iframe");for(let n=0;n<t.length;n++)if(t[n].contentWindow===e.source){jQuery(t[n]).css({height:e.data.height});break}}loadMap(t){const n=t.dataset,{id:o,svgFileLastChanged:s,viewBox:r,loadDb:i}=n,a=e(n,["id","svgFileLastChanged","viewBox","loadDb"]),l=Number(o),c=Number(s);void 0!==i&&M(a,{database:{loadOnStart:"true"===i}}),setTimeout((()=>{new window.mapsvg.map(t.id,{id:l,options:Object.assign({id:l},a),svgFileLastChanged:c})}),5)}lazyLoadMap(e){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(this.loadMap(e.target),t.unobserve(e.target))}))}),{root:null,threshold:0});t.observe(e)}loadMaps(){this.unloadMaps();document.querySelectorAll('.mapsvg[data-autoload="true"]').forEach((e=>{"true"===e.dataset.lazy?this.lazyLoadMap(e):this.loadMap(e)})),this.loaded=!0}unloadMaps(){document.querySelectorAll('.mapsvg[data-autoload="true"]').forEach((e=>{const t=e.getAttribute("id"),n=this.getById(t);n&&n.destroy()})),this.loaded=!1}setEventHandlers(){window.addEventListener("message",this.receiveMessageFromIframe,!1)}addInstance(e){this.instances.push(e)}get(e){return this.instances[e]}getById(e){const t=this.instances.filter((function(t){return t.id==e}));if(t.length>0)return t[0]}getByContainerId(e){const t=this.instances.filter((function(t){return t.$map.attr("id")==e}));if(t.length>0)return t[0]}extend(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}set nonce(e){this._nonce=e}get nonce(){return this._nonce}get googleMapsApiKey(){return this.googleMaps.apiKey}extendBuiltins(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),Math.hypot=Math.hypot||function(...e){let t=0;const n=e.length;for(let o=0;o<n;o++){if(e[o]===1/0||e[o]===-1/0)return 1/0;t+=e[o]*e[o]}return Math.sqrt(t)},SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(e){let t;try{t=e.getScreenCTM().inverse().multiply(this.getScreenCTM())}catch(e){return}return t},Object.values||(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))})}}P.initialized=!1;const B=P.createClient();export{P as M,n as R,e as _,p as a,t as b,j as c,M as d,r as e,i as f,x as g,L as h,s as i,A as j,m as k,v as l,B as m,N as n,c as o,l as p,f as q,u as r,d as s,g as t,a as u,T as v,k as w,F as x,S as y,_ as z};
//# sourceMappingURL=Mapsvg-Dt-f87Eo.js.map
