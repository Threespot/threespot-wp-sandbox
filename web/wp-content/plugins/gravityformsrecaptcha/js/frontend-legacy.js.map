{"version":3,"file":"./js/frontend-legacy.js","mappings":"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","sources":["webpack://gravityformsrecaptcha/./js/src/frontend-legacy.js","webpack://gravityformsrecaptcha/webpack/before-startup","webpack://gravityformsrecaptcha/webpack/startup","webpack://gravityformsrecaptcha/webpack/after-startup"],"sourcesContent":["/* global jQuery, gform, gforms_recaptcha_recaptcha_strings, grecaptcha */\n( ( $, gform, grecaptcha, strings ) => {\n\t/**\n\t * Make the API request to Google to get the reCAPTCHA token right before submission.\n\t *\n\t * @since 1.0\n\t *\n\t * @param {Object} e The event object.\n\t * @return {void}\n\t */\n\tconst getToken = ( e ) => {\n\t\tconst form = $( e.data.form );\n\t\tconst recaptchaField = form.find( '.ginput_recaptchav3' );\n\t\tconst dataInput = recaptchaField.find( '.gfield_recaptcha_response' );\n\n\t\tif ( ! dataInput.length || dataInput.val().length ) {\n\t\t\treturn;\n\t\t}\n\n\t\te.preventDefault();\n\n\t\tgrecaptcha.ready( () => {\n\t\t\tgrecaptcha.execute( strings.site_key, { action: 'submit' } )\n\t\t\t\t.then( ( token ) => {\n\t\t\t\t\tif ( token.length && typeof token === 'string' ) {\n\t\t\t\t\t\tdataInput.val( token );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Sometimes the submit button is disabled to prevent the user from clicking it again,\n\t\t\t\t\t// for example when 3DS is being processed for stripe elements.\n\t\t\t\t\t// We need to enable it before submitting the form, otherwise it won't be submitted.\n\t\t\t\t\tconst $submitButton = $( '#gform_submit_button_' + form[0].dataset.formid );\n\t\t\t\t\tif ( $submitButton.prop( 'disabled' ) === true ) {\n\t\t\t\t\t\t$submitButton.prop( 'disabled', false );\n\t\t\t\t\t}\n\n\t\t\t\t\tform.submit();\n\t\t\t\t} );\n\t\t} );\n\t};\n\n\t/**\n\t * Add event listeners to the form.\n\t *\n\t * @since 1.0\n\t *\n\t * @param {string|number} formId The numeric ID of the form.\n\t * @return {void}\n\t */\n\tconst addFormEventListeners = ( formId ) => {\n\t\tconst $form = $( `#gform_${ formId }:not(.recaptcha-v3-initialized)` );\n\n\t\t$form.on( 'submit', { form: $form }, getToken );\n\n\t\t$form.addClass( 'recaptcha-v3-initialized' );\n\t};\n\n\t/**\n\t * The reCAPTCHA handler.\n\t *\n\t * @since 1.0\n\t *\n\t * @return {void}\n\t */\n\tconst gfRecaptcha = () => {\n\t\tconst self = this;\n\n\t\t/**\n\t\t * Initialize the Recaptcha handler.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tself.init = () => {\n\t\t\tself.elements = {\n\t\t\t\tformIds: self.getFormIds(),\n\t\t\t};\n\t\t\tself.addEventListeners();\n\t\t};\n\n\t\t/**\n\t\t * Get an array of form IDs.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {Array} Array of form IDs.\n\t\t */\n\t\tself.getFormIds = () => {\n\t\t\tconst ids = [];\n\t\t\tconst forms = document.querySelectorAll( '.gform_wrapper form' );\n\n\t\t\tforms.forEach( ( form ) => {\n\t\t\t\tif ( 'formid' in form.dataset ) {\n\t\t\t\t\tids.push( form.dataset.formid );\n\t\t\t\t} else {\n\t\t\t\t\tids.push( form.getAttribute( 'id' ).split( 'gform_' )[ 1 ] );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn ids;\n\t\t};\n\n\t\t/**\n\t\t * Add event listeners to the page.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tself.addEventListeners = () => {\n\t\t\tself.elements.formIds.forEach( ( formId ) => {\n\t\t\t\taddFormEventListeners( formId );\n\t\t\t} );\n\n\t\t\t$( document ).on( 'gform_post_render', ( event, formId ) => {\n\t\t\t\taddFormEventListeners( formId );\n\t\t\t} );\n\t\t};\n\n\t\tself.init();\n\t};\n\n\t// Initialize and run the whole shebang.\n\t$( document ).ready( () => {\n\t\tgfRecaptcha();\n\t} );\n} )( jQuery, gform, grecaptcha, gforms_recaptcha_recaptcha_strings );\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[\"./js/src/frontend-legacy.js\"]();\n",""],"names":["$","gform","grecaptcha","strings","getToken","e","form","data","recaptchaField","find","dataInput","length","val","preventDefault","ready","execute","site_key","action","then","token","$submitButton","dataset","formid","prop","submit","addFormEventListeners","formId","$form","concat","on","addClass","gfRecaptcha","self","_this","init","elements","formIds","getFormIds","addEventListeners","ids","forms","document","querySelectorAll","forEach","push","getAttribute","split","event","jQuery","gforms_recaptcha_recaptcha_strings"],"sourceRoot":""}